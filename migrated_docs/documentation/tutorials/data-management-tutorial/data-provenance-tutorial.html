<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Agave Developer Docs</title>
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">


    <!-- <script src="https://use.typekit.net/squ8frf.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script> -->

    <link href="../../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link rel="preload" href="fonts/slate.woff?-syv14m" as="font">
    <link rel="preload" href="fonts/agave.woff" as="font">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <!-- <script src="../../../../javascripts/jquery.min.js" type="text/javascript"></script> -->

      <script src="../../../../javascripts/all_nosearch.js" type="text/javascript"></script>
    <script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43163231-12', 'auto');
ga('require', 'eventTracker');
ga('require', 'outboundLinkTracker');
ga('require', 'urlChangeTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script src="../../../../javascripts/autotrack.js" type="text/javascript" async="true"></script>

    <style>
    .js #fouc { display: none; }
    </style>
    <script type="text/javascript">
        document.documentElement.className = 'js';
    </script>
  </head>

  <body class="migrated_docs migrated_docs_documentation migrated_docs_documentation_tutorials migrated_docs_documentation_tutorials_data-management-tutorial migrated_docs_documentation_tutorials_data-management-tutorial_data-provenance-tutorial">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../../images/navbar.png" />
      </span>
    </a>
    <div id="fouc">
        <div class="tocify-wrapper">
          <img class="menu-logo" src="../../../../images/agave-docs-logo.png" />
          
          <div id="toc">
          </div>
        </div>
        <div class="page-wrapper">
          <div class="dark-box"></div>
          <div class="content">
            <h3 id="file-history-draft">File history &ndash; <strong>DRAFT</strong></h3>

<p>A full history of changes, permissions changes, and access events made through the Files API is available for every file and folder on registered <a href="#systems">Agave systems</a>. Two kinds of events are recorded in a file item&rsquo;s history, both of which represent mutations of the file item and/or its metadata. </p>

<p>represents the provenance of a file or folder as observed by the Platform over time. </p>

<p>Provenance is:
* Logging+relationships</p>

<p>Provenance is not:<br>
* Versioning
* Guaranteed reproducibility</p>

<p>Think of provenance as a bank statement, not a kit car.</p>

<h4 id="what-information-is-available">What information is available</h4>

<p>Agave tracks every direct action it takes on a file or directory. As with all Agave resources, the recorded provenance is a subset of the events thrown by various file actions. </p>

<p>Additionally, it will make note of any indirect action it observes about file or directory. Examples of direct action are transferring a directory from one system to another or renaming a file. Examples of indirect action are a user manually deleting a file from the command line. The table below contains a list of all the provenance actions recorded.</p>

<pre><code>Insert data provenance table
</code></pre>

<h4 id="how-accurate-is-this-information">How accurate is this information</h4>

<p>Agave does not own the storage and execution systems you access through the REST APIs, so it cannot guarantee that it will be aware of everything that happens on that file system. Thus, Agave takes a best-effort approach to provenance allowing you to choose, through your own use of best practices, how thorough you want the provenance trail of your data to be.</p>

<h4 id="why-is-this-useful">Why is this useful?</h4>

<ul>
<li>See who did what, when</li>
<li>Check data integrity</li>
<li>Answer origin questions</li>
<li>Get alerts and do forensics</li>
<li>Trace steps of experiment</li>
</ul>

<h3 id="file-history">File history</h3>

<h4 id="listing-history-events">Listing history events</h4>
<pre class="highlight shell"><code>curl -sk -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> https://<span class="nv">$API_BASE_URL</span>/files/<span class="nv">$API_VERSION</span>/hisotry/data.agaveapi.co/<span class="nv">$API_USERNAME</span>/picksumipsum.txt
</code></pre>
<pre class="highlight plaintext"><code>files-history -v -S data.agaveapi.co $API_USERNAME/picksumipsum.txt
</code></pre>

<p>The response to this contains a summary listing all permissions on the</p>
<pre class="highlight javascript"><code><span class="p">[]</span>
</code></pre>

<h3 id="searching-for-events">Searching for events</h3>
<pre class="highlight shell"><code>curl -sk -H <span class="s2">"Authorization: Bearer </span><span class="nv">$ACCESS_TOKEN</span><span class="s2">"</span> https://<span class="nv">$API_BASE_URL</span>/files/<span class="nv">$API_VERSION</span>/hisotry/data.agaveapi.co/<span class="nv">$API_USERNAME</span>/picksumipsum.txt?agent<span class="o">=</span>rjohnson
</code></pre>
<pre class="highlight plaintext"><code>files-history -v -S data.agaveapi.co -U rjohnson $API_USERNAME/picksumipsum.txt
</code></pre>

<p>The response to this contains a JSON array of every action performed on the file by the user rjohnson.</p>
<pre class="highlight javascript"><code><span class="p">[]</span>
</code></pre>

          </div>
          <div class="dark-box">
          </div>
        </div>
    </div>
    <script type="text/javascript">
      document.getElementById("fouc").style.display="block";
    </script>
  </body>
</html>
