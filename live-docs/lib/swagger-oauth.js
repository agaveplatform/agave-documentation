function handleLogin(){var e=[],t=window.swaggerUi.api.authSchemes||window.swaggerUi.api.securityDefinitions;if(t){var n,i=t;for(n in i){var r=i[n];if("oauth2"===r.type&&r.scopes){oauth2KeyName=n;var o;if(Array.isArray(r.scopes)){var a;for(a=0;a<r.scopes.length;a++)e.push(r.scopes[a])}else for(o in r.scopes)e.push({scope:o,description:r.scopes[o]})}}}for(window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),popupDialog=$(['<div class="modal api-popup-dialog in" id="credentials-modal" tabindex="-1" role="dialog" aria-labelledby="credentials-modal-label" aria-hidden="false" style="display: block;">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close api-popup-cancel" data-dismiss="modal"><span aria-hidden="true">\xd7</span><span class="sr-only">Close</span></button>','<h3 class="modal-title" id="credentials-modal-label">Select OAuth2.0 Scopes</h3>',"</div>",'<div class="modal-body">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>","<form>",'<div class="api-popup-scopes">','<div class="scopes">',"</div>","</div>","<form>",'<p class="error-msg"></p>',"</div>",'<div class="modal-footer">','<div class="api-popup-actions"><button class="api-popup-cancel btn btn-default" type="button">Cancel</button><button class="api-popup-authbtn btn btn-primary" type="button">Authorize</button></div>',"</div>","</div>","</div>","</div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find(".scopes").empty(),a=0;a<e.length;a++)o=e[a],str='<span data-toggle-scope="'+o.scope+'" class="scope">'+o.scope+"</span>",popup.append(str);popupDialog.find("scopes").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),popupDialog.find("[data-toggle-scope]").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),$("button.api-popup-authbtn").unbind(),popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide(),popupDialog.hide();var e=window.swaggerUi.api.authSchemes,t=window.location,n=location.pathname.substring(0,location.pathname.lastIndexOf("/")),i=t.protocol+"//"+t.host+n+"/o2c.html",r=window.oAuthRedirectUrl||i,o=null;for(var a in e)if(e.hasOwnProperty(a)){var s=e[a].flow;if("oauth2"!==e[a].type||!s||"implicit"!==s&&"accessCode"!==s){if(e[a].grantTypes){var l=e[a].grantTypes;for(var u in l)if(l.hasOwnProperty(u)&&"implicit"===u){var c=l[u];c.loginEndpoint.url;o=c.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=c.tokenName}else if(l.hasOwnProperty(u)&&"accessCode"===u){var c=l[u];c.tokenRequestEndpoint.url;o=c.tokenRequestEndpoint.url+"?response_type=code",window.swaggerUi.tokenName=c.tokenName}}}else{var c=e[a];o=c.authorizationUrl+"?response_type="+("implicit"===s?"token":"code"),window.swaggerUi.tokenName=c.tokenName||"access_token",window.swaggerUi.tokenUrl="accessCode"===s?c.tokenUrl:null}}var p=[],l=$(".scopes").find(".active");for(k=0;k<l.length;k++){var h=$(l[k]).attr("data-toggle-scope");-1===p.indexOf(h)&&p.push(h)}var d=Math.random();window.enabledScopes=p,redirect_uri=r,o+="&redirect_uri="+encodeURIComponent(r),o+="&realm="+encodeURIComponent(realm),o+="&client_id="+encodeURIComponent(clientId),o+="&scope="+encodeURIComponent(p.join(" ")),o+="&state="+encodeURIComponent(d),window.open(o)}),popupMask.show(),popupDialog.show()}function handleLogout(){for(key in window.authorizations.authz)window.authorizations.remove(key);window.enabledScopes=null;var e=$(".api-ic");e.addClass("btn-default"),e.removeClass("btn-success"),e.removeClass("btn-warning"),e.text("oauth"),$("#input_apiKey").val("")}function initOAuth(e){var t=e||{},n=[];if(appName=t.appName||n.push("missing appName"),popupMask=t.popupMask||$("#api-common-mask"),popupDialog=t.popupDialog||$(".api-popup-dialog"),clientId=t.clientId||n.push("missing client id"),realm=t.realm||n.push("missing realm"),n.length>0)return void log("auth unable initialize oauth: "+n);$("pre code").each(function(e,t){hljs.highlightBlock(t)});var i=$(".api-ic");i.unbind(),i.click(function(e){$(e.target).hasClass("btn-default")?handleLogin():handleLogout()})}var appName,popupMask,popupDialog,clientId,realm,oauth2KeyName,redirect_uri;window.processOAuthCode=function(e){var t={client_id:clientId,code:e.code,grant_type:"authorization_code",redirect_uri:redirect_uri};$.ajax({url:window.swaggerUi.tokenUrl,type:"POST",data:t,success:function(e,t,n){onOAuthComplete(e)},error:function(e,t,n){onOAuthComplete("")}})},window.onOAuthComplete=function(e){if(e)if(e.error){var t=$("input[type=checkbox],.secured");t.each(function(e){t[e].checked=!1}),alert(e.error)}else{var n=e[window.swaggerUi.tokenName];if(n){var i=null;$.each($(".auth #api_information_panel"),function(e,t){var n=t;if(n&&n.childNodes){var r=[];$.each(n.childNodes,function(e,t){var n=t.innerHTML;n&&r.push(n)});for(var o=[],a=0;a<r.length;a++){var s=r[a];window.enabledScopes&&-1==window.enabledScopes.indexOf(s)&&o.push(s)}o.length>0?(i=t.parentNode,$(i).find(".api-ic").addClass("btn-warning"),$(i).find(".api-ic").removeClass("btn-default"),$(i).find(".api-ic").removeClass("btn-success")):(i=t.parentNode,$(i).find(".api-ic").addClass("btn-success"),$(i).find(".api-ic").removeClass("btn-default"),$(i).find(".api-ic").removeClass("btn-warning"))}}),$(".api-ic").text("signout"),$("#input_apiKey").val(n),window.swaggerUi.api.clientAuthorizations.add(oauth2KeyName,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+n,"header"))}}};